@page "/jewelries"
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize]
@using WEB_253504_VILKINA.BLAZORWASM.Components
@using WEB_253504_VILKINA.DOMAIN.Entities

<PageTitle>Jewelry</PageTitle>

<CategorySelector />
<JewelryList JewelrySelected="OnJewelrySelected" />
<Pager />
<JewelryDetails SelectedJewelry="SelectedJewelry" />

@code {
    [Inject] required public IDataService DataService { get; set; }
    WEB_253504_VILKINA.DOMAIN.Entities.Jewelry? SelectedJewelry { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await DataService.GetProductListAsync();
    }

    void OnJewelrySelected(int id)
    {
        SelectedJewelry = DataService.Jewelries.FirstOrDefault(m => m.Id == id);
    }
}